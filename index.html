<!DOCTYPE  html>
<html lang=”en”>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!-- name for webpage header -->
		<title>MobileDoorbell</title> 
		
		<!-- Link to your main style sheet-->
		<link rel="stylesheet" href="https://rabidcodehog.github.io/camera-test/style.css"> 
	</head>
	<body onload="initialize()">
		<div id="titleBlock">
			<center><h1><strong>Camera Output</strong></h1></center>
			<center><h4 id="textClientIP">Client Pending...</h4></center>
			<center><h4 id="textHostIP">Doorbell Host IP Pending...</h4></center>
		</div><hr/>
		<div id="loadingBlock" class="viewDiv">
			<img src='https://rabidcodehog.github.io/camera-test/images/loading.gif' width='100%' height='100%' alt='loading gif'/>
		</div>
		<div><center>
			<input type='button' onclick='turnOn()' value='CONNECT'/>
			<input type='button' onclick='turnOff()' value='DISCONNECT'/>
		</center></div>
		<div id="cameraBlock" class="viewDiv">
			<!-- Camera -->
			<main id="camera">
				<!-- Camera sensor -->
				<canvas id="camera--sensor"></canvas>

				<!-- Camera view -->
				<video id="camera--view" autoplay playsinline></video>
				
				<!-- Camera output -->
				<img src="//:0" alt="" id="camera--output">
				
				<!-- Camera trigger -->
				<button id="camera--trigger">Take a picture</button>
			</main>
		</div><hr/>
		<!-- Reference to your JavaScript file -->
		<!-- <script src="app.js"></script> -->
		<script>
	function initialize() 
	{
		document.getElementById("loadingBlock").style.display = "block";
		document.getElementById("cameraBlock").style.display = "none";
		
		document.getElementById('textClientIP').innerHTML = 'Connecting IP: ' + json.ip;
	}
		</script>
		<script>
	function turnOn() 
	{
		var load = document.getElementById("loadingBlock");
		var camera = document.getElementById("cameraBlock");
		if (camera.style.display === "none")
		{
			load.style.display = "none";
			camera.style.display = "block";
		}
	}
		</script>
		<script>
	function turnOff()
	{
		var load = document.getElementById("loadingBlock");
		var camera = document.getElementById("cameraBlock");
		if (camera.style.display === "block")
		{
			load.style.display = "block";
			camera.style.display = "none";
		}
	}
		</script>
		<script type="application/javascript">
	function getIP(json) 
	{
		document.getElementById('textClientIP').innerHTML = 'Connecting IP: ' + json.ip;
	}
		</script>
		<script src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
		<script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
	</body>
</html>
