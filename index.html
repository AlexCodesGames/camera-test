<!DOCTYPE  html>
<html lang=”en”>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<!-- favicon details 
		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
		<link rel="manifest" href="/site.webmanifest">
		<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
		<meta name="msapplication-TileColor" content="#da532c">
		<meta name="theme-color" content="#ffffff">-->

		<!-- name for webpage header -->
		<title>MobileDoorbell</title> 
		
		<!-- Link to your main style sheet-->
		<link rel="stylesheet" href="https://rabidcodehog.github.io/camera-test/style.css"> 
	</head>
	<body onload="initialize()">
		<div id="titleBlock">
			<center><h1><strong>Camera Output</strong></h1></center>
			<center><h4 id="textClientIP">Client Pending...</h4></center>
			<center><h4 id="textHostIP">Doorbell Host IP Pending...</h4></center>
		</div><hr/>
		<div id="loadingBlock" class="viewDiv">
			<img src='https://rabidcodehog.github.io/camera-test/images/loading.gif' width='100%' height='100%' alt='loading gif'/>
		</div>
		<div><center>
			<button id="buttonConnect">Connect</button>
			<button id="buttonDisconnect">Disconnect</button>
		</center></div>
		<div id="cameraBlock" class="viewDiv">
			<!-- Camera -->
			<main id="camera">
				<!-- Camera sensor -->
				<canvas id="cameraCanvas"></canvas>

				<!-- Camera view -->
				<video id="cameraVideo" autoplay playsinline></video>
				
				<!-- Camera output -->
				<img src="//:0" alt="" id="cameraOutput">
				
				<!-- Camera trigger -->
				<button id="buttonSnapshot">Take Picture</button>
			</main>
		</div><hr/>
		<!-- Reference to your JavaScript file -->
		<!-- <script src="app.js"></script> -->
		<script>
	function initialize() 
	{
		document.getElementById("loadingBlock").style.display = "block";
		document.getElementById("cameraBlock").style.display = "none";
		
		document.getElementById('textClientIP').innerHTML = 'Connecting IP: ' + json.ip;
	}
		</script>
		<script type="application/javascript">
	function getIP(json) 
	{
		document.getElementById('textClientIP').innerHTML = 'Connecting IP: ' + json.ip;
	}
		</script>
		<script src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
		<script type="application/javascript" src="https://api.ipify.org?format=jsonp&callback=getIP"></script>
	</body>
</html>
